<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Image Server Size</title>
<script src="../jslib/jquery-1.11.0.min.js" type="text/javascript">
	<!--script-->
</script>
</head>
<body>
<div style="width: 10%;"> <img data-tag="gta-5" data-proxy="true" data-count="01.jpg" style="width: 100%;" src="16-10.png" /> </div>
<div style="width: 32%;"> <img data-tag="gta-5" data-proxy="true" data-count="01.jpg" style="width: 100%;" src="16-9.png" /> </div>
<div style="width: 50%;"> <img data-tag="gta-5" data-proxy="true" data-count="01.jpg" style="width: 100%;" src="16-9.png" /> </div>
<div style="width: 70%;"> <img data-tag="gta-5" data-proxy="true" data-count="01.jpg" style="width: 100%;" src="16-10.png" /> </div>
<div style="width: 34%;"> <img data-tag="gta-5" data-proxy="true" data-count="01.jpg" style="width: 100%;" src="16-9.png" /> </div>
<div style="width: 50%;"> <img data-tag="gta-5" data-proxy="true" data-count="01.jpg" style="width: 100%;" src="16-9.png" /> </div>
<script type="text/javascript">
	function formatTimThumbString(tag, count, width, height) {
		var service = 'http://forplay.bg/phplib/timthumb/timthumb.php';
		
		return service + '?src=/assets/articles/' + tag + 
						 '/' + tag + '-' + count + 
						 '&w=' + width + 
						 '&h=' + height;
	}

	function loadImages() {
		var $imgs = $('img');
			
		$imgs.each(function (index) {
			var $img = $(this);
			
			var src = formatTimThumbString($img.data('tag'), 
												 $img.data('count'), 
												 $img.width(), 
												 $img.height());
			
			$img.attr('src', src);
		});
	}
	
	function loadImage($img) {			
		var src = formatTimThumbString($img.data('tag'), 
											 $img.data('count'),
											 $img.width(), 
											 $img.height());
		
		$img.data('proxy', false);
		$img.attr('data-proxy', $img.data('proxy'));
		$img.attr('src', src);
	}
	
	$('img').on('load', function(e) {
		if ($(this).data('proxy')) {
    		loadImage($(this));
		}
	});
</script>
</body>
</html>