/**
 * This is the notification for new comments.
 */
 
[role=status] {
  position: fixed;
  width: 20%;
  padding: 1.25%;
  padding-bottom: 0;
  overflow: hidden;
  background-color: fade(@dark, 90%);
  color: @light;
  right: 0;
  bottom: 0;
  z-index: 3000;
  
  #notificationClose {
    &:extend(#userProfile #profileClose all); 
  }
  
  li {
    display: flex;
    flex-direction: row;
    align-content: center;
    margin-bottom: 6.25%;
    
    /**
     * Fetch all notifications, 
     * but show only limited number with CSS.
     */
    
    &:nth-of-type(n + 6) {
      display: none;
    }
    
    a {
      color: @light;
      display: flex;
      line-height: normal;
      justify-content: center;
      flex-direction: column;
      flex-grow: 1;
      overflow: hidden;
      
      span {
        display: block;
        width: 93.75%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        
        &:first-of-type {
          font-size: 11pt;
        }
        
        &:last-of-type {
          font-size: 11pt;
          color: @light;
        }
      }
    }
  }
  
  img {
    width: 48px;
    height: 48px;
    min-width: 48px;
    vertical-align: middle;
    margin-right: 6.25%;
  }
  
  h2 {
    .clip;
  }
}

/**
 * This is the styling for total comments for articles.
 */

#topVideos article h3 a:last-of-type,
#topReviews article h3 a:last-of-type,
#covers article h3 a:last-of-type {
    font-size: 11pt;  
    margin-top: 1.04%;
}

article h3 a:last-of-type {
  font-size: 11pt;
  vertical-align: baseline;
  font-weight: normal;
  display: block;
}

/**
 * These are the icons realted to comments.
 */

[data-icon] {
  border: none;
  background: none;
  cursor: pointer;
  
  &::before {
    &:extend([class^="icon-"] all);
    margin-right: 4px;
    vertical-align: baseline;
  }
  
  &[data-icon=comments]::before { &:extend(.icon-comments:before); }
  &[data-icon=up]::before { &:extend(.icon-arrow-up:before); }
  &[data-icon=send]::before { &:extend(.icon-send:before); }
  &[data-icon=clear]::before { &:extend(.icon-times-rectangle:before); }
  &[data-icon=bold]::before { &:extend(.icon-bold:before); }
  &[data-icon=italic]::before { &:extend(.icon-italic:before); }
  &[data-icon=reply]::before { &:extend(.icon-reply:before); }
  &[data-icon=edit]::before { &:extend(.icon-pencil:before); }
  &[data-icon=save]::before { &:extend(.icon-send:before); }
  &[data-icon=cancel]::before { &:extend(.icon-times-rectangle:before); }
  &[data-icon=delete]::before { &:extend(.icon-trash:before); }
  &[data-icon=like]::before { &:extend(.icon-star:before); }
  &[data-icon=like][aria-pressed=true]::before { &:extend(.icon-star-o:before); }
  &[data-icon=flag]::before { &:extend(.icon-flag:before); }
  &[data-icon=flag][aria-pressed=true]::before { &:extend(.icon-flag-o:before); }
  &[data-icon=ban]::before { &:extend(.icon-legal:before); }
}

/**
 * And finally the comment set section.
 */

.comment-set {
  width: 60%;
  margin-top: 1.25%;
  margin-left: 20%;
  
  &[aria-busy=true] {
    h2,
    form,
    ul {
      opacity: 0;
    }
  }
  
  h2,
  form,
  ul {
    padding: 2.08%;
  }
  
  ul,
  li {
    list-style: none;
  }
  
  h2 {
    width: 100%;
    margin: 2.08% 0;
    margin-bottom: 0;
  }
  
  h3 {
    &:extend(.layout .center-col h3 all);
    
    padding: 0;
    margin: 2.08% 0;
  }
  
  form,
  h3 {
    &:target::before {
      content: "";
      display: block;
    }  
  }
  
  [contenteditable] {
    width: 100%;
    height: auto;
    border: 1px solid transparent;
    padding: 0;
    margin: 2.08% 0;
    font-size: 11pt;
    
    &[aria-readonly=false] {
      padding: 1.04%;
      min-height: 120px;
      max-height: 240px;
      overflow: hidden;
      border: 1px solid fade(@dark, 30%);
    }
    
    img {
      height: auto;
      width: auto;
      max-width: 320px;
      max-height: 320px;
      display: inline;
      vertical-align: baseline;
    }
    
    a {
      text-decoration: underline !important; 
    }
  }
  
  li {
    padding: 2.08%;
    background: linear-gradient(90deg, #fcfcfc, #fafafa);
    border-left: 3px solid #ccc;
    border-bottom: 1px solid #eee;
    
    &[data-banned=true] {
      [contenteditable][aria-readonly=true] {
        color: transparent;
        background-image: url(/assets/helpers/ban.jpg);
        min-height: 128px;
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center 35%;
      }
    }
    
    &:nth-of-type(2n - 1) {
      background: linear-gradient(90deg, #fcfcfc, #fff9eb);
    }
    
    &:first-of-type {
      border-top: 1px solid #eee;
    }
    
    form {
      padding: 0;
    }
    
    > b img {
      width: 48px;
      height: 48px;
      margin-right: 2.08%;
    }
    
    > b a,
    > b img {
      display: inline-block;
      vertical-align: middle;
    }
  }
  
  [role=toolbar] {
    span,
    button,
    a {
      font-size: 11pt;
    }
    
    button,
    a {
      margin-right: 1.04%;
      vertical-align: baseline;
      
      &:disabled,
      &[aria-pressed=true] {
        opacity: 0.5;
        
        &::before {
          color: fade(@dark, 50%);
        }
      }
    }
    
    span a {
      font-weight: bold;
      
      &:hover {
        color: @dark;  
      }
    }
  }
}

@media 
only screen and (max-width: 1279px) {
  [role=status] {
    display: none;
  }
  
  .comment-set {
    width: 100%;
    margin-top: 6.25%;
    margin-left: 0;
    
    ul {
      padding: 0;
    }
    
    li,
    form {
      padding: 6.25%;
    }
   
    li {
      > b img {
        margin-right: 6.25%;
      }
    }
    
    [contenteditable] {
      margin: 6.25% 0;
      
      &[aria-readonly=false] {
        padding: 3.125%; 
      }
      
      img {
        max-width: 100%;
      }
    }
    
    [role=toolbar] {
      button,
      a {
        margin-right: 3.125%;
      }
    }
    
    h2 {
      width: 100%;
      margin: 6.25% 0;
      margin-bottom: 0;
      
      /**
       * Duplicate of .read-set .center-col h2,
       * but for some reason I cannot extend.
       */
      
      padding: 6.25%;
      word-break: break-word;
      clear: both;
  
      /**
       * Duplicate of .layout .center-col h2,
       * but for some reason I cannot extend.
       */
      
      font-size: 30pt;
      color: fade(@grey, 50%);
      text-transform: uppercase;
      
      * {
        font-size: 30pt;
        color: fade(@grey, 50%);
        text-transform: uppercase;
      }
    }
    
    h3 {
      &:extend(.read-set h3 all);
      
      margin: 6.25% 0;
    }
  }
}

/**
 * Colors
 */
 
.review h3 a:last-of-type {
  color: @review !important;
}

.feature h3 a:last-of-type {
  color: @feature !important;
}

.news h3 a:last-of-type {
  color: @news !important;
}

.video h3 a:last-of-type {
  color: @video !important;
}
 
.review [data-icon],
main[data-subtype=review] .comment-set [data-icon] {
  &:before {
    color: @review !important;
  }
}

.feature [data-icon],
main[data-subtype=feature] .comment-set [data-icon] {
  &:before {
    color: @feature !important;
  }
}

.news [data-icon],
main[data-subtype=news] .comment-set [data-icon] {
  &:before {
    color: @news !important;
  }
}

.video [data-icon],
main[data-subtype=video] .comment-set [data-icon] {
  &:before {
    color: @video !important;
  }
}

main[data-subtype=review] section > h2 a,
main[data-subtype=review] section > h2 strong,
main[data-subtype=review] [role=toolbar] a {
  color: @review !important;
}

main[data-subtype=feature] section > h2 a,
main[data-subtype=feature] section > h2 strong,
main[data-subtype=feature] [role=toolbar] a {
  color: @feature !important;
}

main[data-subtype=news] section > h2 a,
main[data-subtype=news] section > h2 strong,
main[data-subtype=news] [role=toolbar] a {
  color: @news !important;
}

main[data-subtype=video] section > h2 a,
main[data-subtype=video] section > h2 strong,
main[data-subtype=video] [role=toolbar] a {
  color: @video !important;
}